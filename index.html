<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Mock Interview Simulator - Kuldeep Kumar</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        .recording-pulse {
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        .speech-recognition-active {
            border: 2px solid #ef4444;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { Play, Pause, RotateCcw, CheckCircle, Clock, Mic, Video, Download, Headphones, Star } = lucideReact;

        const MockInterviewApp = () => {
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [isRecording, setIsRecording] = useState(false);
            const [timer, setTimer] = useState(0);
            const [responses, setResponses] = useState({});
            const [interviewType, setInterviewType] = useState('technical');
            const [isListening, setIsListening] = useState(false);
            const [transcript, setTranscript] = useState('');
            const [mediaRecorder, setMediaRecorder] = useState(null);
            const [audioChunks, setAudioChunks] = useState([]);
            const recognitionRef = useRef(null);

            const interviewQuestions = {
                technical: [
                    "Tell me about yourself and your experience as an Implementation Engineer.",
                    "Describe a challenging implementation project you worked on at Sapiens or Uniphore. What was your approach?",
                    "How do you handle system downtime during production deployments? Give me a specific example.",
                    "Explain your experience with SQL-based configurations and Web Services integration.",
                    "Tell me about a time when you had to work with a difficult client. How did you handle it?",
                    "What automation techniques have you implemented to improve efficiency? You mentioned 50% reduction - tell me how.",
                    "How do you ensure security and compliance during implementations?",
                    "Describe your experience with Agile methodologies and CI/CD pipelines.",
                    "What steps do you take for quality assurance and deployment validation?",
                    "Why are you interested in joining our company? What attracts you to this role?"
                ],
                behavioral: [
                    "Walk me through your career journey from Computer Science graduate to Senior Consultant.",
                    "Tell me about a time when you had to learn a new technology quickly for a project.",
                    "Describe a situation where you had to work under tight deadlines. How did you manage?",
                    "How do you handle conflicts within your team or with clients?",
                    "Tell me about a time when you made a mistake in an implementation. How did you handle it?",
                    "Describe a time when you went above and beyond for a client.",
                    "How do you prioritize multiple projects with competing deadlines?",
                    "Tell me about your experience mentoring junior engineers. Can you give an example?",
                    "Describe a situation where you had to present technical information to non-technical stakeholders.",
                    "What motivates you in your work? What keeps you engaged in implementation engineering?"
                ]
            };

            const sampleAnswers = {
                0: "I'm Kuldeep Kumar, an Implementation Engineer with 8+ years of experience in enterprise SaaS solutions. I currently work at Sapiens as a Senior Consultant, where I lead full-cycle implementations of enterprise products. My expertise includes SQL-based configurations, web services integration, and client-facing deployments. I've successfully implemented 10+ enterprise solutions with a 95% customer satisfaction rate. What I'm particularly proud of is developing automation scripts that reduced manual work by 50%, and my track record of maintaining high system availability. I'm passionate about solving complex technical challenges while ensuring excellent client experiences.",
                
                1: "At Uniphore, I led the implementation of speech recognition software for a major banking client with a very tight 6-week deadline. The main challenge was integrating with their legacy core banking system while ensuring zero downtime during business hours. My approach was systematic: First, I conducted detailed requirement analysis and identified potential integration points. Then, I developed a phased rollout plan with parallel testing environments. I created custom SQL scripts for data migration and built Java preprocessing tools to ensure compatibility with their existing workflows. I also set up continuous monitoring to track system performance. The result was successful deployment within deadline, 50% reduction in system downtime compared to their previous solution, and the client extended their contract based on our implementation quality.",
                
                3: "In my role, SQL and Web Services integration are daily requirements. At Sapiens, I regularly configure business rule engines using complex SQL queries to support unique client workflows. For example, I recently worked on a insurance claims processing system where I had to create SQL stored procedures that could handle multiple policy types and business rules dynamically. For Web Services, I've integrated REST APIs for real-time data synchronization between client systems and our SaaS platform. I use tools like Postman for API testing and have experience with XML parsing for legacy system integrations. I also implement error handling and retry mechanisms to ensure robust integrations that can handle network issues gracefully."
            };

            const interviewTips = [
                "Use the STAR method: Situation, Task, Action, Result",
                "Include specific numbers: 95% success rate, 50% efficiency improvement, 8+ years experience",
                "Speak slowly and clearly - aim for 150-180 words per minute",
                "Practice the 2-second pause before answering complex questions",
                "Mention specific technologies: SQL Server, Apache Tomcat, REST APIs, CI/CD",
                "Always end with results: 'This resulted in...', 'The outcome was...', 'The client was pleased because...'",
                "Prepare 3-4 detailed STAR stories from your Sapiens and Uniphore experience",
                "Practice saying technical terms clearly: Implementation, Configuration, Integration"
            ];

            useEffect(() => {
                let interval;
                if (isRecording) {
                    interval = setInterval(() => {
                        setTimer(prev => prev + 1);
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [isRecording]);

            // Initialize Speech Recognition
            useEffect(() => {
                if (typeof window !== 'undefined' && ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    const recognition = new SpeechRecognition();
                    recognition.continuous = true;
                    recognition.interimResults = true;
                    recognition.lang = 'en-US';

                    recognition.onresult = (event) => {
                        let finalTranscript = '';
                        for (let i = event.resultIndex; i < event.results.length; i++) {
                            if (event.results[i].isFinal) {
                                finalTranscript += event.results[i][0].transcript;
                            }
                        }
                        if (finalTranscript) {
                            setTranscript(prev => prev + finalTranscript + ' ');
                            setResponses(prev => ({
                                ...prev,
                                [currentQuestion]: (prev[currentQuestion] || '') + finalTranscript + ' '
                            }));
                        }
                    };

                    recognition.onerror = (event) => {
                        console.log('Speech recognition error:', event.error);
                        setIsListening(false);
                    };

                    recognition.onend = () => {
                        setIsListening(false);
                    };

                    recognitionRef.current = recognition;
                }
            }, [currentQuestion]);

            const startRecording = async () => {
                setIsRecording(true);
                setTimer(0);
                
                // Start audio recording
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    const recorder = new MediaRecorder(stream);
                    const chunks = [];

                    recorder.ondataavailable = (event) => {
                        chunks.push(event.data);
                    };

                    recorder.onstop = () => {
                        const blob = new Blob(chunks, { type: 'audio/wav' });
                        const url = URL.createObjectURL(blob);
                        
                        // Create download link
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `interview-question-${currentQuestion + 1}.wav`;
                        a.style.display = 'none';
                        document.body.appendChild(a);
                        // Auto-download is disabled for user control
                    };

                    recorder.start();
                    setMediaRecorder(recorder);
                } catch (err) {
                    console.log('Audio recording not supported or permission denied');
                }

                // Start speech recognition
                if (recognitionRef.current) {
                    try {
                        recognitionRef.current.start();
                        setIsListening(true);
                        setTranscript('');
                    } catch (err) {
                        console.log('Speech recognition not available');
                    }
                }
            };

            const stopRecording = () => {
                setIsRecording(false);
                
                if (mediaRecorder && mediaRecorder.state === 'recording') {
                    mediaRecorder.stop();
                    mediaRecorder.stream.getTracks().forEach(track => track.stop());
                }

                if (recognitionRef.current && isListening) {
                    recognitionRef.current.stop();
                    setIsListening(false);
                }
            };

            const nextQuestion = () => {
                if (currentQuestion < interviewQuestions[interviewType].length - 1) {
                    setCurrentQuestion(prev => prev + 1);
                    setTimer(0);
                    setIsRecording(false);
                    setTranscript('');
                    stopRecording();
                }
            };

            const prevQuestion = () => {
                if (currentQuestion > 0) {
                    setCurrentQuestion(prev => prev - 1);
                    setTimer(0);
                    setIsRecording(false);
                    setTranscript('');
                    stopRecording();
                }
            };

            const resetInterview = () => {
                setCurrentQuestion(0);
                setTimer(0);
                setIsRecording(false);
                setResponses({});
                setTranscript('');
                stopRecording();
            };

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            };

            const getTimerColor = () => {
                if (timer < 90) return 'text-green-600';
                if (timer < 180) return 'text-yellow-600';
                return 'text-red-600';
            };

            const downloadResponse = () => {
                const response = responses[currentQuestion] || '';
                if (response.trim()) {
                    const blob = new Blob([`Question ${currentQuestion + 1}: ${interviewQuestions[interviewType][currentQuestion]}\n\nYour Response:\n${response}\n\nTime taken: ${formatTime(timer)}`], 
                        { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `interview-response-${currentQuestion + 1}.txt`;
                    a.click();
                    URL.revokeObjectURL(url);
                }
            };

            return (
                <div className="max-w-6xl mx-auto p-4 bg-gray-50 min-h-screen">
                    <div className="bg-white rounded-lg shadow-lg p-6">
                        <div className="text-center mb-6">
                            <h1 className="text-4xl font-bold text-blue-600 mb-2">
                                🎯 AI Mock Interview Simulator
                            </h1>
                            <p className="text-gray-600">Customized for Kuldeep Kumar - Implementation Engineer</p>
                            <p className="text-sm text-gray-500 mt-2">
                                💡 Features: Voice Recognition, Audio Recording, Real-time Feedback
                            </p>
                        </div>
                        
                        {/* Interview Type Selection */}
                        <div className="mb-6">
                            <div className="flex justify-center space-x-4">
                                <button
                                    onClick={() => {setInterviewType('technical'); resetInterview();}}
                                    className={`px-6 py-3 rounded-lg font-medium transition-all ${
                                        interviewType === 'technical' 
                                            ? 'bg-blue-600 text-white shadow-lg' 
                                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                    }`}
                                >
                                    🔧 Technical Interview
                                </button>
                                <button
                                    onClick={() => {setInterviewType('behavioral'); resetInterview();}}
                                    className={`px-6 py-3 rounded-lg font-medium transition-all ${
                                        interviewType === 'behavioral' 
                                            ? 'bg-blue-600 text-white shadow-lg' 
                                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                    }`}
                                >
                                    👤 Behavioral Interview
                                </button>
                            </div>
                        </div>

                        {/* Progress Bar */}
                        <div className="mb-6">
                            <div className="flex justify-between text-sm text-gray-600 mb-2">
                                <span>Question {currentQuestion + 1} of {interviewQuestions[interviewType].length}</span>
                                <span>{Math.round(((currentQuestion + 1) / interviewQuestions[interviewType].length) * 100)}% Complete</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-3">
                                <div 
                                    className="bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-500"
                                    style={{ width: `${((currentQuestion + 1) / interviewQuestions[interviewType].length) * 100}%` }}
                                ></div>
                            </div>
                        </div>

                        {/* Current Question */}
                        <div className="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg mb-6 border border-blue-200">
                            <div className="flex items-start space-x-3">
                                <div className="bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm">
                                    {currentQuestion + 1}
                                </div>
                                <div>
                                    <h2 className="text-xl font-semibold text-blue-800 mb-3">
                                        Interview Question:
                                    </h2>
                                    <p className="text-lg text-gray-800 leading-relaxed">
                                        {interviewQuestions[interviewType][currentQuestion]}
                                    </p>
                                </div>
                            </div>
                        </div>

                        {/* Timer and Recording Controls */}
                        <div className="flex justify-center items-center space-x-6 mb-6">
                            <div className={`flex items-center space-x-2 bg-gray-100 px-6 py-3 rounded-lg border-2 ${isRecording ? 'border-red-400' : 'border-gray-300'}`}>
                                <Clock className={`w-6 h-6 ${getTimerColor()}`} />
                                <span className={`text-2xl font-mono font-bold ${getTimerColor()}`}>
                                    {formatTime(timer)}
                                </span>
                                {timer > 0 && (
                                    <span className="text-sm text-gray-500 ml-2">
                                        {timer < 90 ? 'Good pace' : timer < 180 ? 'Consider wrapping up' : 'Too long'}
                                    </span>
                                )}
                            </div>
                            
                            <button
                                onClick={isRecording ? stopRecording : startRecording}
                                className={`flex items-center space-x-3 px-8 py-4 rounded-lg font-medium transition-all transform hover:scale-105 ${
                                    isRecording 
                                        ? 'bg-red-600 hover:bg-red-700 text-white shadow-lg recording-pulse' 
                                        : 'bg-green-600 hover:bg-green-700 text-white shadow-lg'
                                }`}
                            >
                                {isRecording ? <Pause className="w-6 h-6" /> : <Play className="w-6 h-6" />}
                                <span className="text-lg">
                                    {isRecording ? '⏹️ Stop Recording' : '🎤 Start Recording'}
                                </span>
                            </button>

                            {isListening && (
                                <div className="flex items-center space-x-2 bg-red-50 px-4 py-2 rounded-lg border border-red-200">
                                    <Mic className="w-5 h-5 text-red-600 recording-pulse" />
                                    <span className="text-red-600 font-medium">Listening...</span>
                                </div>
                            )}
                        </div>

                        {/* Sample Answer */}
                        {sampleAnswers[currentQuestion] && (
                            <div className="bg-green-50 p-5 rounded-lg mb-6 border border-green-200">
                                <h3 className="font-semibold text-green-800 mb-3 flex items-center">
                                    <Star className="w-5 h-5 mr-2" />
                                    Sample STAR Answer (for reference):
                                </h3>
                                <p className="text-gray-700 leading-relaxed italic">
                                    "{sampleAnswers[currentQuestion]}"
                                </p>
                                <p className="text-sm text-green-600 mt-2">
                                    💡 Notice the structure: Situation → Task → Action → Result
                                </p>
                            </div>
                        )}

                        {/* Response Text Area */}
                        <div className="mb-6">
                            <div className="flex justify-between items-center mb-2">
                                <label className="block text-sm font-medium text-gray-700">
                                    Your Response {transcript && '(Voice input active)'}:
                                </label>
                                {responses[currentQuestion] && (
                                    <button
                                        onClick={downloadResponse}
                                        className="flex items-center space-x-1 text-sm text-blue-600 hover:text-blue-700"
                                    >
                                        <Download className="w-4 h-4" />
                                        <span>Download</span>
                                    </button>
                                )}
                            </div>
                            <textarea
                                className={`w-full p-4 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${
                                    isListening ? 'speech-recognition-active' : 'border-gray-300'
                                }`}
                                rows="6"
                                placeholder="Your response will appear here as you speak, or you can type directly..."
                                value={responses[currentQuestion] || ''}
                                onChange={(e) => setResponses(prev => ({ ...prev, [currentQuestion]: e.target.value }))}
                            />
                            {responses[currentQuestion] && (
                                <div className="text-sm text-gray-500 mt-1">
                                    Word count: {responses[currentQuestion].split(' ').length} | 
                                    Estimated speaking time: {Math.ceil(responses[currentQuestion].split(' ').length / 2.5)} seconds
                                </div>
                            )}
                        </div>

                        {/* Navigation Buttons */}
                        <div className="flex justify-between items-center mb-6">
                            <button
                                onClick={resetInterview}
                                className="flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all"
                            >
                                <RotateCcw className="w-4 h-4" />
                                <span>Reset Interview</span>
                            </button>
                            
                            <div className="space-x-4">
                                <button
                                    onClick={prevQuestion}
                                    disabled={currentQuestion === 0}
                                    className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all"
                                >
                                    ← Previous
                                </button>
                                <button
                                    onClick={nextQuestion}
                                    disabled={currentQuestion === interviewQuestions[interviewType].length - 1}
                                    className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all"
                                >
                                    Next →
                                </button>
                            </div>
                        </div>

                        {/* Personalized Tips */}
                        <div className="bg-yellow-50 p-5 rounded-lg border border-yellow-200">
                            <h3 className="font-semibold text-yellow-800 mb-3 flex items-center">
                                <Headphones className="w-5 h-5 mr-2" />
                                💡 Personalized Tips for Kuldeep:
                            </h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                                {interviewTips.map((tip, index) => (
                                    <div key={index} className="flex items-start space-x-2">
                                        <CheckCircle className="w-4 h-4 text-yellow-600 mt-1 flex-shrink-0" />
                                        <span className="text-sm text-gray-700">{tip}</span>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Feature Information */}
                        <div className="mt-6 bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <h3 className="font-semibold text-blue-800 mb-3">🎙️ How to Use This Tool:</h3>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-700">
                                <div>
                                    <strong>🎤 Voice Recording:</strong> Click "Start Recording" to practice speaking your answers aloud. The timer helps you track response length.
                                </div>
                                <div>
                                    <strong>📝 Speech-to-Text:</strong> Your spoken words will automatically appear in the text box (requires microphone permission).
                                </div>
                                <div>
                                    <strong>📊 Real-time Feedback:</strong> Get immediate feedback on response length and pacing to improve your performance.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<MockInterviewApp />, document.getElementById('root'));
    </script>
</body>
</html>